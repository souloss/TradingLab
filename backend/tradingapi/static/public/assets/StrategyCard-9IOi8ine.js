var T=e=>{throw TypeError(e)};var A=(e,t,s)=>t.has(e)||T("Cannot "+s);var d=(e,t,s)=>(A(e,t,"read from private field"),s?s.call(e):t.get(e)),E=(e,t,s)=>t.has(e)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),R=(e,t,s,o)=>(A(e,t,"write to private field"),o?o.call(e,s):t.set(e,s),s),M=(e,t,s)=>(A(e,t,"access private method"),s);import{S as se,s as te,t as q,v as ie,w as B,x as re,r as a,y as oe,z as ne,j as i,P as _,h as D,i as de,c as le,f as ae,d as ce,e as U,l as ue,g as he}from"./index-0_VxV31d.js";import{u as me,C as xe,I as f}from"./check-BbGLn5SG.js";var N,C,u,b,p,S,L,z,fe=(z=class extends se{constructor(t,s){super();E(this,p);E(this,N);E(this,C);E(this,u);E(this,b);R(this,N,t),this.setOptions(s),this.bindMethods(),M(this,p,S).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var o;const s=this.options;this.options=d(this,N).defaultMutationOptions(t),te(this.options,s)||d(this,N).getMutationCache().notify({type:"observerOptionsUpdated",mutation:d(this,u),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&q(s.mutationKey)!==q(this.options.mutationKey)?this.reset():((o=d(this,u))==null?void 0:o.state.status)==="pending"&&d(this,u).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=d(this,u))==null||t.removeObserver(this)}onMutationUpdate(t){M(this,p,S).call(this),M(this,p,L).call(this,t)}getCurrentResult(){return d(this,C)}reset(){var t;(t=d(this,u))==null||t.removeObserver(this),R(this,u,void 0),M(this,p,S).call(this),M(this,p,L).call(this)}mutate(t,s){var o;return R(this,b,s),(o=d(this,u))==null||o.removeObserver(this),R(this,u,d(this,N).getMutationCache().build(d(this,N),this.options)),d(this,u).addObserver(this),d(this,u).execute(t)}},N=new WeakMap,C=new WeakMap,u=new WeakMap,b=new WeakMap,p=new WeakSet,S=function(){var s;const t=((s=d(this,u))==null?void 0:s.state)??ie();R(this,C,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},L=function(t){B.batch(()=>{var s,o,n,l,c,r,g,$;if(d(this,b)&&this.hasListeners()){const h=d(this,C).variables,v=d(this,C).context;(t==null?void 0:t.type)==="success"?((o=(s=d(this,b)).onSuccess)==null||o.call(s,t.data,h,v),(l=(n=d(this,b)).onSettled)==null||l.call(n,t.data,null,h,v)):(t==null?void 0:t.type)==="error"&&((r=(c=d(this,b)).onError)==null||r.call(c,t.error,h,v),($=(g=d(this,b)).onSettled)==null||$.call(g,void 0,t.error,h,v))}this.listeners.forEach(h=>{h(d(this,C))})})},z);function Ee(e,t){const s=re(),[o]=a.useState(()=>new fe(s,e));a.useEffect(()=>{o.setOptions(e)},[o,e]);const n=a.useSyncExternalStore(a.useCallback(c=>o.subscribe(B.batchCalls(c)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),l=a.useCallback((c,r)=>{o.mutate(c,r).catch(oe)},[o]);if(n.error&&ne(o.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:l,mutateAsync:n.mutate}}var be="Label",H=a.forwardRef((e,t)=>i.jsx(_.label,{...e,ref:t,onMouseDown:s=>{var n;s.target.closest("button, input, select, textarea")||((n=e.onMouseDown)==null||n.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));H.displayName=be;var X=H;const pe=de("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=a.forwardRef(({className:e,...t},s)=>i.jsx(X,{ref:s,className:D(pe(),e),...t}));m.displayName=X.displayName;var K="Checkbox",[ve,Re]=le(K),[je,Ne]=ve(K),Q=a.forwardRef((e,t)=>{const{__scopeCheckbox:s,name:o,checked:n,defaultChecked:l,required:c,disabled:r,value:g="on",onCheckedChange:$,form:h,...v}=e,[j,P]=a.useState(null),y=ae(t,x=>P(x)),F=a.useRef(!1),V=j?h||!!j.closest("form"):!0,[w=!1,I]=ce({prop:n,defaultProp:l,onChange:$}),ee=a.useRef(w);return a.useEffect(()=>{const x=j==null?void 0:j.form;if(x){const O=()=>I(ee.current);return x.addEventListener("reset",O),()=>x.removeEventListener("reset",O)}},[j,I]),i.jsxs(je,{scope:s,state:w,disabled:r,children:[i.jsx(_.button,{type:"button",role:"checkbox","aria-checked":k(w)?"mixed":w,"aria-required":c,"data-state":W(w),"data-disabled":r?"":void 0,disabled:r,value:g,...v,ref:y,onKeyDown:U(e.onKeyDown,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:U(e.onClick,x=>{I(O=>k(O)?!0:!O),V&&(F.current=x.isPropagationStopped(),F.current||x.stopPropagation())})}),V&&i.jsx(Ce,{control:j,bubbles:!F.current,name:o,value:g,checked:w,required:c,disabled:r,form:h,style:{transform:"translateX(-100%)"},defaultChecked:k(l)?!1:l})]})});Q.displayName=K;var G="CheckboxIndicator",J=a.forwardRef((e,t)=>{const{__scopeCheckbox:s,forceMount:o,...n}=e,l=Ne(G,s);return i.jsx(ue,{present:o||k(l.state)||l.state===!0,children:i.jsx(_.span,{"data-state":W(l.state),"data-disabled":l.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});J.displayName=G;var Ce=e=>{const{control:t,checked:s,bubbles:o=!0,defaultChecked:n,...l}=e,c=a.useRef(null),r=me(s),g=he(t);a.useEffect(()=>{const h=c.current,v=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(v,"checked").set;if(r!==s&&P){const y=new Event("click",{bubbles:o});h.indeterminate=k(s),P.call(h,k(s)?!1:s),h.dispatchEvent(y)}},[r,s,o]);const $=a.useRef(k(s)?!1:s);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??$.current,...l,tabIndex:-1,ref:c,style:{...e.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function k(e){return e==="indeterminate"}function W(e){return k(e)?"indeterminate":e?"checked":"unchecked"}var Y=Q,ke=J;const Z=a.forwardRef(({className:e,...t},s)=>i.jsx(Y,{ref:s,className:D("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(ke,{className:D("flex items-center justify-center text-current"),children:i.jsx(xe,{className:"h-4 w-4"})})}));Z.displayName=Y.displayName;function Me({strategy:e,isSelected:t,parameters:s,onToggle:o,onParameterChange:n,isSingleSelect:l=!1}){const c=()=>{switch(e.type){case"MACD":return i.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(m,{htmlFor:`${e.id}-fast`,className:"text-sm font-medium text-foreground",children:"快线周期"}),i.jsx(f,{id:`${e.id}-fast`,type:"number",value:s.fastPeriod||12,onChange:r=>n(e.id,"fastPeriod",Number(r.target.value)),className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(m,{htmlFor:`${e.id}-slow`,className:"text-sm font-medium text-foreground",children:"慢线周期"}),i.jsx(f,{id:`${e.id}-slow`,type:"number",value:s.slowPeriod||26,onChange:r=>n(e.id,"slowPeriod",Number(r.target.value)),className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(m,{htmlFor:`${e.id}-signal`,className:"text-sm font-medium text-foreground",children:"信号周期"}),i.jsx(f,{id:`${e.id}-signal`,type:"number",value:s.signalPeriod||9,onChange:r=>n(e.id,"signalPeriod",Number(r.target.value)),className:"mt-1"})]})]});case"MA":return i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(m,{htmlFor:`${e.id}-short`,className:"text-sm font-medium text-foreground",children:"短期均线"}),i.jsx(f,{id:`${e.id}-short`,type:"number",value:s.shortPeriod||5,onChange:r=>n(e.id,"shortPeriod",Number(r.target.value)),className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(m,{htmlFor:`${e.id}-long`,className:"text-sm font-medium text-foreground",children:"长期均线"}),i.jsx(f,{id:`${e.id}-long`,type:"number",value:s.longPeriod||20,onChange:r=>n(e.id,"longPeriod",Number(r.target.value)),className:"mt-1"})]})]});case"ATR":return i.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(m,{htmlFor:`${e.id}-atr`,className:"text-sm font-medium text-foreground",children:"ATR周期"}),i.jsx(f,{id:`${e.id}-atr`,type:"number",value:s.atr_period||14,onChange:r=>n(e.id,"atr_period",Number(r.target.value)),className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(m,{htmlFor:`${e.id}-highlow`,className:"text-sm font-medium text-foreground",children:"高低点计算周期"}),i.jsx(f,{id:`${e.id}-highlow`,type:"number",value:s.period||20,onChange:r=>n(e.id,"period",Number(r.target.value)),className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(m,{htmlFor:`${e.id}-multiplier`,className:"text-sm font-medium text-foreground",children:"ATR倍数"}),i.jsx(f,{id:`${e.id}-multiplier`,type:"number",step:"0.1",value:s.atr_multiplier||1.5,onChange:r=>n(e.id,"atr_multiplier",Number(r.target.value)),className:"mt-1"})]})]});case"VOLUME":return i.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(m,{htmlFor:`${e.id}-time`,className:"text-sm font-medium text-foreground",children:"时间范围"}),i.jsx(f,{id:`${e.id}-time`,type:"number",value:s.period||20,onChange:r=>n(e.id,"period",Number(r.target.value)),className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(m,{htmlFor:`${e.id}-buy`,className:"text-sm font-medium text-foreground",children:"买入成交量低倍系数"}),i.jsx(f,{id:`${e.id}-buy`,type:"number",step:"0.1",value:s.buyVolumeMultiplier||.3,onChange:r=>n(e.id,"buyVolumeMultiplier",Number(r.target.value)),className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(m,{htmlFor:`${e.id}-sell`,className:"text-sm font-medium text-foreground",children:"卖出成交量高倍系数"}),i.jsx(f,{id:`${e.id}-sell`,type:"number",value:s.sellVolumeMultiplier||3,onChange:r=>n(e.id,"sellVolumeMultiplier",Number(r.target.value)),className:"mt-1"})]})]});default:return null}};return i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:`strategy-card rounded-lg p-4 cursor-pointer border-2 transition-all ${t?`${e.bgColor} ${e.borderColor} selected`:"border-border hover:border-border bg-card"}`,onClick:()=>o(e.id),children:i.jsxs("div",{className:"flex items-center space-x-3",children:[l?i.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${t?`${e.color.replace("text-","bg-")} border-current`:"border-gray-300"}`,children:t&&i.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}):i.jsx(Z,{checked:t,onChange:()=>o(e.id),className:`w-4 h-4 ${e.color}`}),i.jsx("i",{className:`${e.icon} ${e.color}`}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-foreground",children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]})}),t&&i.jsxs("div",{className:`${e.bgColor} rounded-lg p-4`,children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[i.jsx("i",{className:`${e.icon} ${e.color}`}),i.jsx("h4",{className:`font-semibold ${e.color}`,children:e.name})]}),c()]})]})}export{m as L,Me as S,Ee as u};
